<!DOCTYPE html>
<html>
<head>
  <title>User Management</title>
</head>
<body>
  <h1>User Management</h1>
  <div>
    <h2>Users List</h2>
    <ul id="userList"></ul>
  </div>

  <div>
    <h2>Add New User</h2>
    <form id="addUserForm">
      <label for="name">Name:</label>
      <input type="text" id="name" required>
      <br>
      <label for="email">Email:</label>
      <input type="email" id="email" required>
      <br>
      <button type="submit">Add User</button>
    </form>
  </div>

  <script>
    // Function to fetch users from the JSON Server API and display them
    function fetchUsers() {
      fetch('http://localhost:3000/users')
        .then(response => response.json())
        .then(users => {
          const userList = document.getElementById('userList');
          userList.innerHTML = '';

          users.forEach(user => {
            const li = document.createElement('li');
            li.innerHTML = `
              ${user.name} (${user.email})
              <button onclick="editUser(${user.id})">Edit</button>
              <button onclick="deleteUser(${user.id})">Delete</button>
            `;
            userList.appendChild(li);
          });
        })
        .catch(error => console.error('Error fetching users:', error));
    }

    // Function to add a new user via the JSON Server API
    function addUser(name, email) {
      fetch('http://localhost:3000/users', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name, email })
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to add user');
        }
        fetchUsers();
      })
      .catch(error => console.error('Error adding user:', error));
    }

    // Function to delete a user via the JSON Server API
    function deleteUser(id) {
      fetch(`http://localhost:3000/users/${id}`, {
        method: 'DELETE',
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to delete user');
        }
        fetchUsers();
      })
      .catch(error => console.error('Error deleting user:', error));
    }

    // Function to update a user via the JSON Server API
    function editUser(id) {
      const name = prompt('Enter new name:');
      const email = prompt('Enter new email:');

      if (name && email) {
        fetch(`http://localhost:3000/users/${id}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ name, email })
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Failed to update user');
          }
          fetchUsers();
        })
        .catch(error => console.error('Error updating user:', error));
      }
    }

    // Event listener for the "Add User" form submission
    const addUserForm = document.getElementById('addUserForm');
    addUserForm.addEventListener('submit', event => {
      event.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      addUser(name, email);
      addUserForm.reset();
    });

    // Fetch users when the page loads
    fetchUsers();
  </script>
</body>
</html>
